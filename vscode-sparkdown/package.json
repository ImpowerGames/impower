{
  "name": "vscode-sparkdown",
  "displayName": "Sparkdown",
  "description": "Sparkdown autocomplete, syntax highlighting, and export to PDF",
  "galleryBanner": {
    "color": "#053155",
    "theme": "dark"
  },
  "icon": "icon.png",
  "publisher": "impowergames",
  "version": "2.1.0",
  "pricing": "Free",
  "license": "MIT",
  "homepage": "https://www.impower.app",
  "bugs": {
    "url": "https://github.com/ImpowerGames/impower/labels/vscode",
    "email": "support@impower.games"
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/ImpowerGames/impower"
  },
  "sponsor": {
    "url": "https://www.patreon.com/impowergames"
  },
  "engines": {
    "vscode": "^1.72.0"
  },
  "categories": [
    "Programming Languages",
    "Other"
  ],
  "activationEvents": [
    "onLanguage:sparkdown",
    "onCommand:sparkdown.exportpdf",
    "onCommand:sparkdown.exportpdfdebug",
    "onCommand:sparkdown:exporthtml",
    "onCommand:sparkdown:exportcsv",
    "onCommand:sparkdown.previewscreenplay",
    "onCommand:sparkdown.previewgame",
    "onView:sparkdown-cheatsheet",
    "onWebviewPanel:sparkdown-preview-screenplay",
    "onWebviewPanel:sparkdown-preview-game"
  ],
  "browser": "./out/extension.js",
  "contributes": {
    "configurationDefaults": {
      "editor.tokenColorCustomizations": {
        "textMateRules": [
          {
            "scope": "string.regexp.scene.sd",
            "settings": {
              "foreground": "#FF8080"
            }
          },
          {
            "scope": "keyword.control.flow.transition.sd",
            "settings": {
              "foreground": "#BEA3A3"
            }
          },
          {
            "scope": "keyword.control.export.section.sd",
            "settings": {
              "foreground": "#FF80F4"
            }
          },
          {
            "scope": "keyword.control.export.jump.sd",
            "settings": {
              "foreground": "#F9B8F9"
            }
          },
          {
            "scope": "keyword.separator.sd",
            "settings": {
              "foreground": "#606080"
            }
          },
          {
            "scope": "markup.bold",
            "settings": {
              "foreground": "#569CD6"
            }
          },
          {
            "scope": "markup.italic",
            "settings": {
              "foreground": "#569CD6"
            }
          },
          {
            "scope": "markup.underline",
            "settings": {
              "foreground": "#569CD6"
            }
          },
          {
            "scope": "markup.strikethrough",
            "settings": {
              "foreground": "#569CD6"
            }
          },
          {
            "scope": "string markup.bold",
            "settings": {
              "foreground": "#CE9178"
            }
          },
          {
            "scope": "string markup.italic",
            "settings": {
              "foreground": "#CE9178"
            }
          },
          {
            "scope": "string markup.underline",
            "settings": {
              "foreground": "#CE9178"
            }
          },
          {
            "scope": "string markup.strikethrough",
            "settings": {
              "foreground": "#CE9178"
            }
          }
        ]
      },
      "[sparkdown]": {
        "diffEditor.ignoreTrimWhitespace": false,
        "editor.wordWrap": "on",
        "editor.wordBasedSuggestions": false,
        "editor.suggestSelection": "first",
        "editor.insertSpaces": true,
        "editor.tabSize": 2,
        "editor.bracketPairColorization.enabled": false,
        "editor.guides.bracketPairs": true,
        "editor.guides.highlightActiveIndentation": true,
        "editor.guides.bracketPairsHorizontal": false,
        "editor.renderWhitespace": "boundary",
        "editor.formatOnSave": true
      }
    },
    "languages": [
      {
        "id": "sparkdown",
        "aliases": [
          "Sparkdown",
          "sparkdown"
        ],
        "extensions": [
          ".sparkdown",
          ".spark",
          ".sd"
        ],
        "configuration": "./language/sparkdown.language-config.json",
        "icon": {
          "light": "icon-lang.png",
          "dark": "icon-lang.png"
        }
      }
    ],
    "grammars": [
      {
        "language": "sparkdown",
        "scopeName": "text.source.sparkdown",
        "path": "./language/sparkdown.language-grammar.json"
      }
    ],
    "snippets": [
      {
        "language": "sparkdown",
        "path": "./language/sparkdown.language-snippets.json"
      }
    ],
    "viewsContainers": {
      "activitybar": [
        {
          "id": "sparkdown-view",
          "icon": "icon-activitybar.png",
          "title": "Sparkdown"
        }
      ]
    },
    "views": {
      "sparkdown-view": [
        {
          "id": "sparkdown-outline",
          "name": "Outline"
        },
        {
          "id": "sparkdown-commands",
          "name": "Commands"
        },
        {
          "id": "sparkdown-cheatsheet",
          "name": "Cheat Sheet",
          "type": "webview"
        }
      ]
    },
    "menus": {
      "editor/title": [
        {
          "when": "resourceLangId == sparkdown",
          "command": "sparkdown.previewgame",
          "group": "navigation@1"
        },
        {
          "when": "resourceLangId == sparkdown",
          "command": "sparkdown.previewscreenplay",
          "group": "navigation@1"
        }
      ]
    },
    "commands": [
      {
        "command": "sparkdown.outline.visibleitems",
        "title": "Change items visible in the outline",
        "icon": "$(eye)",
        "category": "Sparkdown"
      },
      {
        "command": "sparkdown.outline.reveal",
        "title": "Reveal cursor position",
        "category": "Sparkdown",
        "icon": "$(remote)"
      },
      {
        "command": "sparkdown.previewgame",
        "title": "Preview game",
        "category": "Sparkdown",
        "icon": "$(github-action)"
      },
      {
        "command": "sparkdown.previewscreenplay",
        "title": "Preview screenplay",
        "category": "Sparkdown",
        "icon": "$(note)"
      },
      {
        "command": "sparkdown.exportpdf",
        "title": "Export screenplay PDF",
        "category": "Sparkdown"
      },
      {
        "command": "sparkdown.exporthtml",
        "title": "Export screenplay HTML",
        "category": "Sparkdown"
      },
      {
        "command": "sparkdown.exportcsv",
        "title": "Export translation CSV",
        "category": "Sparkdown"
      },
      {
        "command": "sparkdown.exportjson",
        "title": "Export JSON",
        "category": "Sparkdown"
      },
      {
        "command": "sparkdown.jumpto",
        "title": "Jump to line",
        "category": "Sparkdown"
      },
      {
        "command": "sparkdown.overwriteSceneNumbers",
        "title": "Number all scenes (overwrites existing scene numbers)",
        "category": "Sparkdown"
      },
      {
        "command": "sparkdown.updateSceneNumbers",
        "title": "Number all scenes (keep existing scene numbers, insert missing ones)",
        "category": "Sparkdown"
      },
      {
        "command": "sparkdown.statistics",
        "title": "View statistics",
        "category": "Sparkdown"
      },
      {
        "command": "sparkdown.shiftScenesUp",
        "title": "Shift Scenes Up",
        "category": "Sparkdown"
      },
      {
        "command": "sparkdown.shiftScenesDown",
        "title": "Shift Scenes Down",
        "category": "Sparkdown"
      }
    ],
    "keybindings": [
      {
        "command": "sparkdown.previewgame",
        "key": "ctrl+shift+v",
        "mac": "cmd+shift+v",
        "when": "editorLangId == sparkdown"
      },
      {
        "command": "sparkdown.exportpdf",
        "key": "ctrl+shift+b",
        "mac": "cmd+shift+b",
        "when": "editorLangId == sparkdown"
      },
      {
        "command": "sparkdown.exportpdfdebug",
        "key": "f5",
        "mac": "f5",
        "when": "editorLangId == sparkdown"
      },
      {
        "command": "sparkdown.shiftScenesUp",
        "key": "alt+up",
        "mac": "alt+up",
        "when": "editorLangId == sparkdown"
      },
      {
        "command": "sparkdown.shiftScenesDown",
        "key": "alt+down",
        "mac": "alt+down",
        "when": "editorLangId == sparkdown"
      }
    ],
    "configuration": [
      {
        "order": 22,
        "id": "sparkdown-language-server",
        "title": "Sparkdown Language Server",
        "properties": {
          "sparkdown.trace.server": {
            "type": "string",
            "scope": "window",
            "enum": [
              "off",
              "messages",
              "verbose"
            ],
            "default": "verbose",
            "description": "Traces the communication between VS Code and the sparkdown language server."
          }
        }
      },
      {
        "title": "Sparkdown Preview",
        "type": "object",
        "properties": {
          "sparkdown.game.previewSynchronizedWithCursor": {
            "type": "boolean",
            "default": true,
            "description": "Synchronize game preview with editor's cursor position"
          },
          "sparkdown.screenplay.previewTexture": {
            "type": "boolean",
            "default": true,
            "description": "Show textured background in screenplay preview"
          },
          "sparkdown.screenplay.previewTheme": {
            "type": "string",
            "enum": [
              "vscode",
              "paper"
            ],
            "description": "The theme to be used for the screenplay preview",
            "default": "paper"
          },
          "sparkdown.screenplay.previewSynchronizedWithCursor": {
            "type": "boolean",
            "default": true,
            "description": "Synchronize screenplay preview with editor's cursor position"
          }
        }
      },
      {
        "title": "Sparkdown Export",
        "type": "object",
        "properties": {
          "sparkdown.screenplay.formatting.printSceneHeadersBold": {
            "type": "boolean",
            "default": true,
            "description": "Make scene headers bold in screenplay"
          },
          "sparkdown.screenplay.markup.printSectionHeaders": {
            "type": "boolean",
            "default": false,
            "description": "Print section headers in screenplay (lines that start with #)"
          },
          "sparkdown.screenplay.markup.printSynopses": {
            "type": "boolean",
            "default": true,
            "description": "Print synopses in screenplay (lines that start with =)"
          },
          "sparkdown.screenplay.markup.printNotes": {
            "type": "boolean",
            "default": false,
            "description": "Print notes in screenplay (text enclosed between [[two brackets]])"
          },
          "sparkdown.screenplay.numbering.printSceneNumbers": {
            "type": "string",
            "enum": [
              "none",
              "left",
              "right",
              "both"
            ],
            "default": "none",
            "description": "Print scene numbers in screenplay"
          },
          "sparkdown.screenplay.numbering.printSectionNumbers": {
            "type": "boolean",
            "default": false,
            "description": "Print section numbers in screenplay"
          },
          "sparkdown.screenplay.pages.printTitlePage": {
            "type": "boolean",
            "default": true,
            "description": "Include title page in screenplay"
          },
          "sparkdown.screenplay.pdf.printProfile": {
            "type": "string",
            "description": "The paper dimensions of the screenplay pdf",
            "enum": [
              "a4",
              "usletter"
            ],
            "default": "usletter"
          },
          "sparkdown.screenplay.pdf.composition.pageBreaks.printDialogueSplitAcrossPages": {
            "type": "boolean",
            "default": true,
            "description": "Allow dialogue to be split between pages of the screenplay pdf"
          },
          "sparkdown.screenplay.pdf.composition.printDialogueMORE": {
            "type": "string",
            "default": "(MORE)",
            "description": "Text to print when dialogue is interrupted by a page break in the screenplay pdf"
          },
          "sparkdown.screenplay.pdf.composition.printDialogueCONTD": {
            "type": "string",
            "default": "(CONT'D)",
            "description": "Text to print next to a character's name when continuing their dialogue after a page break in the screenplay pdf"
          },
          "sparkdown.screenplay.pdf.extras.printPageHeader": {
            "type": "string",
            "default": "",
            "description": "Text inserted at the top of each page in the screenplay pdf"
          },
          "sparkdown.screenplay.pdf.extras.printPageFooter": {
            "type": "string",
            "default": "",
            "description": "Text inserted at the bottom of each page in the screenplay pdf"
          },
          "sparkdown.screenplay.pdf.extras.printPageWatermark": {
            "type": "string",
            "default": "",
            "description": "Text displayed across each page in the screenplay pdf"
          },
          "sparkdown.screenplay.pdf.numbering.printPageNumbers": {
            "type": "boolean",
            "default": true,
            "description": "Print page numbers in the screenplay pdf"
          },
          "sparkdown.screenplay.pdf.bookmarks.printBookmarks": {
            "type": "boolean",
            "default": true,
            "description": "Create bookmarks for sections and scenes in the screenplay pdf"
          },
          "sparkdown.screenplay.pdf.bookmarks.printBookmarksForInvisibleSections": {
            "type": "boolean",
            "default": true,
            "markdownDescription": "If `#sparkdown.screenplay.annotations.printSectionHeaders#` is false, add bookmarks for sections to scene headers instead"
          }
        }
      },
      {
        "title": "Sparkdown Editor",
        "type": "object",
        "properties": {
          "sparkdown.editor.parentheticalNewlineHelper": {
            "type": "boolean",
            "default": true,
            "markdownDescription": "Automatically skip to the next line if the caret is just before the last parenthesis within a parenthetical (as such❚). If you are using a vim emulator, you should disable this setting - an [issue with vscode](https://github.com/Microsoft/vscode/issues/13441) means it is impossible for two extensions to simultaneously intercept typing."
          },
          "sparkdown.editor.refreshStatsOnSave": {
            "type": "boolean",
            "default": false,
            "description": "Automatically refresh the statistics panel when you save the document"
          }
        }
      }
    ]
  },
  "scripts": {
    "install-screenplay": "cd ./webviews/screenplay-preview && npm ci && cd ../../",
    "build-screenplay": "cd ./webviews/screenplay-preview && npm run build && cd ../../",
    "package-screenplay": "cd ./webviews/screenplay-preview && npm run package && cd ../../",
    "postinstall": "npm run install-screenplay",
    "compile": "webpack",
    "build": "npm run build-screenplay && npm run compile",
    "package": "npm run package-screenplay && webpack --mode production --devtool hidden-source-map",
    "pretest": "npm run build",
    "browser": "npm run build && vscode-test-web --browserType=chromium --extensionDevelopmentPath=. .",
    "vscode:prepublish": "npm run package",
    "publish-minor": "vsce publish minor",
    "publish-major": "vsce publish major"
  },
  "devDependencies": {
    "@types/node": "^20.2.5",
    "@types/pdfkit": "^0.12.9",
    "@types/vscode": "^1.78.1",
    "@vscode/test-web": "^0.0.44",
    "assert": "^2.0.0",
    "brfs": "^2.0.2",
    "browserify-zlib": "^0.2.0",
    "buffer": "^6.0.3",
    "copy-webpack-plugin": "^11.0.0",
    "esbuild": "^0.18.11",
    "esbuild-loader": "^3.0.1",
    "esbuild-plugin-copy": "^2.1.1",
    "events": "^3.3.0",
    "os-browserify": "^0.3.0",
    "path-browserify": "^1.0.1",
    "process": "^0.11.10",
    "stream-browserify": "^3.0.0",
    "transform-loader": "^0.2.4",
    "typescript": "^5.1.3",
    "util": "^0.12.5",
    "webpack": "^5.88.1",
    "webpack-cli": "^5.1.4"
  },
  "dependencies": {
    "@impower/spark-evaluate": "file:../packages/spark-evaluate",
    "@impower/spark-editor-protocol": "file:../packages/spark-editor-protocol",
    "@impower/spark-screenplay": "file:../packages/spark-screenplay",
    "@impower/sparkdown": "file:../packages/sparkdown",
    "@impower/sparkdown-language-server": "file:../packages/sparkdown-language-server",
    "@vscode/codicons": "^0.0.33",
    "csv-stringify": "^6.4.0",
    "html-entities": "^2.3.3",
    "iconv-lite": "^0.6.3",
    "pdfkit": "^0.13.0",
    "textbox-for-pdfkit": "^0.2.1",
    "vscode-languageclient": "^8.1.0",
    "yaml": "^2.3.1"
  }
}
