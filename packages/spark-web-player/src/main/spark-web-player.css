:host {
  /* ===== Design Tokens ===== */
  --swp-background-color: inherit;
  --swp-foreground-color: currentColor;
  --swp-error-color: #f14c4c;

  /* Colors */
  --swp-game-background-color: #000;
  --swp-accent-color: #66baff;
  --swp-pause-color: #ffcc00;
  --swp-resize-handle-color: #888;
  --swp-toolbar-border-color: rgba(255, 255, 255, 0.15);
  --swp-toolbar-button-hover-color: rgba(255, 255, 255, 0.12);
  --swp-toolbar-button-active-color: rgba(255, 255, 255, 0.18);
  --swp-play-button-color: #0e639c;
  --swp-play-button-hover-color: #1177bb;
  --swp-play-overlay-color: rgba(0, 0, 0, 0.75);

  /* Sizing */
  --swp-toolbar-height: 28px;
  --swp-toolbar-font-size: 11px;
  --swp-toolbar-icon-size: 16px;
  --swp-play-icon-size: 6rem;

  /* Spacing */
  --swp-toolbar-button-gap: 6px;
  --swp-toolbar-items-gap: 10px;
  --swp-toolbar-label-padding: 0 3px;

  /* Resize Handle */
  --swp-resize-handle-height: 4px;
  --swp-resize-handle-width: 32px;
  --swp-resize-handle-radius: 2px;

  /* Fullscreen */
  --swp-toolbar-fullscreen-gradient: linear-gradient(
    to bottom,
    rgba(0, 0, 0, 0) 0%,
    rgba(0, 0, 0, 0.5) 25%,
    rgba(0, 0, 0, 1) 100%
  );

  /* Transitions */
  --swp-transition-fast: 0.15s;
  --swp-transition-med: 0.2s ease;

  display: flex;
  flex-direction: column;
  height: 100%;
}

#viewport {
  height: 100%;
  background-color: var(--swp-background-color);
  color: var(--swp-foreground-color);
}

#game {
  position: relative;
  height: 100%;
  container-type: size;
  container-name: screen;
  resize: none;
}

.fullscreen #game {
  height: 100% !important;
}

#game-background {
  position: absolute;
  inset: 0;
  background-color: var(--swp-game-background-color);
}

#game-view {
  position: absolute;
  inset: 0;
}

#game-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
}

#game-overlay.pause-game::after {
  border: 1px solid var(--swp-pause-color);
  content: "";
  position: absolute;
  inset: 0;
}

#play-button {
  position: absolute;
  inset: 0;
  cursor: pointer;
  pointer-events: auto;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: var(--swp-play-overlay-color);
  font-weight: 700;
  font-size: 2.25rem; /* keep text size explicit */
  color: var(--swp-play-button-color);
  opacity: 0;
  transition: opacity var(--swp-transition-fast),
    color var(--swp-transition-fast);
}

@media (hover: hover) and (pointer: fine) {
  #play-button:hover {
    opacity: 1;
    color: var(--swp-play-button-hover-color);
  }
}

#play-icon {
  width: var(--swp-play-icon-size);
  height: var(--swp-play-icon-size);
}

#toolbar {
  display: flex;
  flex-direction: row;
  align-items: center;
  border-top: 1px solid var(--swp-toolbar-border-color);
  height: var(--swp-toolbar-height);
  font-size: var(--swp-toolbar-font-size);
  white-space: nowrap;
  position: relative;
  pointer-events: auto;
  cursor: ns-resize;
  transition: border-color var(--swp-transition-med);
  background-color: var(--swp-background-color);
  min-height: 28px;
}

.fullscreen #toolbar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  border-color: transparent;
  background-color: transparent;
  background-image: var(--swp-toolbar-fullscreen-gradient);
  pointer-events: none;
  cursor: default;
}

#toolbar.snapping {
  border-color: var(--swp-accent-color);
}

#resize-handle {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: var(--swp-resize-handle-width);
  height: var(--swp-resize-handle-height);
  border-radius: var(--swp-resize-handle-radius);
  background: var(--swp-resize-handle-color);
}

.fullscreen #resize-handle {
  display: none;
}

#left-items,
#right-items {
  background-color: inherit;
  height: 100%;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  pointer-events: none;
}

#left-items {
  gap: var(--swp-toolbar-items-gap);
}

#location-items {
  height: 100%;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  background-color: inherit;
}

#launch-state-icon,
#fullscreen-icon {
  background-color: currentColor;
  width: var(--swp-toolbar-icon-size);
  height: var(--swp-toolbar-icon-size);
}

#launch-state-icon {
  margin-right: var(--swp-toolbar-button-gap);
}

#launch-state-icon:not([icon]) {
  display: none;
}

#launch-state-icon[icon="preview"] {
  mask-image: url('data:image/svg+xml,<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M7.99993 6.00316C9.47266 6.00316 10.6666 7.19708 10.6666 8.66981C10.6666 10.1426 9.47266 11.3365 7.99993 11.3365C6.52715 11.3365 5.33324 10.1426 5.33324 8.66981C5.33324 7.19708 6.52715 6.00316 7.99993 6.00316ZM7.99993 7.00315C7.07946 7.00315 6.33324 7.74935 6.33324 8.66981C6.33324 9.59028 7.07946 10.3365 7.99993 10.3365C8.9204 10.3365 9.6666 9.59028 9.6666 8.66981C9.6666 7.74935 8.9204 7.00315 7.99993 7.00315ZM7.99993 3.66675C11.0756 3.66675 13.7307 5.76675 14.4673 8.70968C14.5344 8.97755 14.3716 9.24908 14.1037 9.31615C13.8358 9.38315 13.5643 9.22041 13.4973 8.95248C12.8713 6.45205 10.6141 4.66675 7.99993 4.66675C5.38454 4.66675 3.12664 6.45359 2.50182 8.95555C2.43491 9.22341 2.16348 9.38635 1.89557 9.31948C1.62766 9.25255 1.46471 8.98115 1.53162 8.71321C2.26701 5.76856 4.9229 3.66675 7.99993 3.66675Z"/></svg>');
}

#launch-state-icon[icon="play"] {
  mask-image: url('data:image/svg+xml,<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.25 3l1.166-.624 8 5.333v1.248l-8 5.334-1.166-.624V3zm1.5 1.401v7.864l5.898-3.932L5.75 4.401z"/></svg>');
}

#launch-state-icon[icon="pause"] {
  color: var(--swp-pause-color);
  mask-image: url('data:image/svg+xml,<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M4.5 3H6v10H4.5V3zm7 0v10H10V3h1.5z"/></svg>');
}

#fullscreen-icon {
  mask-image: url('data:image/svg+xml,<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M2.5 2H6V3H3V6H2V2.5L2.5 2ZM3 10H2V13.5L2.5 14H6V13H3V10ZM13 13H10V14H13.5L14 13.5V10H13V13ZM13.5 2H10V3H13V6H14V2.5L13.5 2Z"/></svg>');
}
.fullscreen #fullscreen-icon {
  mask-image: url('data:image/svg+xml,<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M5 2H6V5.5L5.5 6H2V5H5V2ZM2 10V11H5V14H6V10.5L5.5 10H2ZM10 10.5V14H11V11H14V10H10.5L10 10.5ZM11 5V2H10V5.5L10.5 6H14V5H11Z"/></svg>');
}

#launch-info,
#execution-info {
  background-color: inherit;
  height: 100%;
  flex-direction: row;
  align-items: center;
}

#launch-info span,
#execution-info span {
  flex-direction: row;
  align-items: center;
}

#launch-info {
  padding: var(--swp-toolbar-button-gap);
}

#aspect-ratio-label {
  padding: var(--swp-toolbar-label-padding);
}
#size-label {
  padding: var(--swp-toolbar-label-padding);
  margin-right: var(--swp-toolbar-button-gap);
}

#executed-label {
  padding: 0 var(--swp-toolbar-button-gap);
}

#connection-label {
  background-color: inherit;
  flex-direction: row;
  white-space: pre;
}

#location-items.error {
  color: var(--swp-error-color);
}

#toolbar.snapping #size-label,
#toolbar.snapping #aspect-ratio-label {
  color: var(--swp-accent-color);
}

.toolbar-button {
  pointer-events: auto;
  cursor: pointer;
  height: 100%;
  padding: 0 var(--swp-toolbar-button-gap);
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  gap: var(--swp-toolbar-button-gap);
}
@media (hover: hover) and (pointer: fine) {
  .toolbar-button:hover {
    background-color: var(--swp-toolbar-button-hover-color);
  }
}
.toolbar-button:active {
  background-color: var(--swp-toolbar-button-active-color);
}

#middle-items {
  flex: 1;
}

#toolbar .choice {
  background-color: inherit;
  position: relative;
  height: 100%;
}

#toolbar .choice.forced .selectedcontent {
  color: var(--swp-accent-color);
}

#toolbar .selectedcontent {
  height: 100%;
  min-width: 16px;
  pointer-events: none;
  align-items: center;
  justify-content: center;
  background-color: inherit;
}

#toolbar select {
  position: absolute;
  inset: 0;
  pointer-events: auto;
  cursor: pointer;
  background-color: inherit;
  height: 100%;
  margin: 0;
  display: flex;
  flex-direction: row;
  align-items: center;
}
