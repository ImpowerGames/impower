{
  "ignoreCase": true,
  "repository": {
    "ws": "/[^\\S\\r\\n]/",
    "namela": "/_?(?:@ws|@BlockEnd|$)/",
    "BlockComment": {
      "match": "/(\\[!--)([^]+?)(--\\])/",
      "tag": "(...) blockComment",
      "fold": "offset(3, -3)",
      "captures": {
        "0": {
          "open": "BlockComment"
        },
        "2": {
          "close": "BlockComment"
        }
      }
    },
    "BlockStart": {
      "match": "/\\[{2}(?![\\[/])/",
      "tag": "squareBracket",
      "closedBy": "BlockEnd"
    },
    "BlockStartClosing": {
      "match": "/\\[{2}//",
      "tag": "squareBracket",
      "closedBy": "BlockEnd"
    },
    "BlockEnd": {
      "match": "/(?!\\]{3})\\]{2}/",
      "tag": "squareBracket",
      "openedBy": ["BlockStart", "BlockStartClosing"]
    },
    "BlockNamePrefix": {
      "match": "/[*=><](?![*=><])|f>|f</",
      "tag": "modifier"
    },
    "BlockNameSuffix": {
      "match": "_",
      "lookbehind": "!/\\s/",
      "tag": "modifier"
    },
    "BlockLabel": {
      "match": "/[^\\s\\]]+/",
      "tag": "invalid"
    },
    "BlockNodeArgument": {
      "match": "/(\\S+?)(\\s*=\\s*)(\")((?:[^\"]|\\\\\")*)(\")/",
      "captures": {
        "0": {
          "type": "BlockNodeArgumentName",
          "tag": "special(propertyName)"
        },
        "1": {
          "type": "BlockNodeArgumentOperator",
          "tag": "definitionOperator"
        },
        "2": {
          "open": "BlockNodeArgumentMark",
          "tag": "string"
        },
        "3": {
          "if": "$0",
          "matches": "style",
          "then": {
            "type": "CSSAttributes",
            "nest": "style-attribute"
          },
          "else": {
            "type": "BlockNodeArgumentValue",
            "tag": "string"
          }
        },
        "4": {
          "close": "BlockNodeArgumentMark",
          "tag": "string"
        }
      }
    },
    "BlockNameMap": {
      "lookup": ["blockquote"],
      "lookahead": "/@namela/",
      "emit": "BlockName",
      "tag": "tagName"
    },
    "BlockNameMapElements": {
      "lookup": ["blockquote"],
      "lookahead": "/@namela/",
      "emit": "BlockName",
      "tag": "tagName"
    },
    "BlockNodeMap": {
      "emit": "BlockNode",
      "indent": "delimited(]])",
      "skip": "/\\s+/",
      "chain": [
        "BlockStart",
        "BlockNamePrefix?",
        "BlockNameMap",
        "BlockNameSuffix?",
        "BlockNodeArgument |* BlockLabel",
        "BlockEnd"
      ]
    },
    "BlockContainerMap": {
      "emit": "BlockContainer",
      "fold": "inside",
      "begin": {
        "type": "BlockContainerMapStartNode",
        "emit": "BlockNode",
        "indent": "delimited(]])",
        "skip": "/\\s+/",
        "chain": [
          "BlockStart",
          "BlockNamePrefix?",
          "BlockNameMapElements",
          "BlockNameSuffix?",
          "BlockNodeArgument |* BlockLabel",
          "BlockEnd"
        ]
      },
      "end": {
        "type": "BlockContainerMapEndNode",
        "emit": "BlockNode",
        "indent": "delimited(]])",
        "skip": "/\\s+/",
        "chain": [
          "BlockStartClosing",
          "BlockNamePrefix?",
          "BlockNameMapElements",
          "BlockNameSuffix?",
          "BlockEnd"
        ]
      }
    }
  },
  "includes": {
    "blocks": ["BlockNodeMap", "BlockContainerMap"]
  },
  "global": ["BlockComment"],
  "root": [
    {
      "include": "blocks"
    }
  ]
}
